"use strict";(self.webpackChunkdellace=self.webpackChunkdellace||[]).push([[931],{10931:(e,a,s)=>{s.r(a),s.d(a,{default:()=>f});var l=s(9950),r=s(2260),t=s(8750),o=s(99496),i=s(19023),n=s(82569),c=s(57266),d=s(67818),u=s(52278),p=s(24948),m=s(95996),h=s(40087),g=s(44414);const f=function(e){let{applyImageCropper:a=!0,label:s="",apiEndPoints:f,name:x,defaultImageUrl:v,aspect:A,children:j,...y}=e;const{t:b}=(0,d.Bd)(),N=(0,n.d4)(h.Qg),[U,w]=(0,l.useState)(!1),[I,C]=(0,l.useState)(),[L,E,M]=(0,c.Mt)(x),R={...L,...y},S=(0,u.WW)();E&&E.touched&&E.error&&(R.error=!0,R.helperText=E.error),(0,l.useEffect)((()=>{C(v||"".concat(m.A.ADMIN_IMAGE_URL,"/logo-default.jpg"))}),[v]);const k=e=>{const a="image/jpeg"===e.type||"image/png"===e.type;a||(0,p.A)({type:"error",message:b("text.common.imageOnlyMessgae")});const s=e.size/1024/1024<5;return s||(0,p.A)({type:"error",message:b("text.common.imageSizeExceedingMessage")}),a&&s},z=e=>{if("uploading"===e.file.status)w(!0);else{const{status:r,response:t}=e.file;if("done"===r)((e,a)=>{const s=new FileReader;s.addEventListener("load",(()=>a(s.result))),s.readAsDataURL(e)})(e.file.originFileObj,(e=>{w(!1),C(e)})),(0,p.A)({type:"success",message:"Image uploaded successfully"}),M.setValue(t.data.basePath||t.data.basePathUrl);else if("error"===r){var a,s,l;w(!1),(0,p.A)({type:"error",message:null===e||void 0===e||null===(a=e.fileList[0])||void 0===a||null===(s=a.response)||void 0===s?void 0:s.message,description:"".concat(e.file.name," file upload failed. ").concat(e.file.response.detail)}),-1!==(null===t||void 0===t||null===(l=t.detail)||void 0===l?void 0:l.search("authenticated"))&&(0,u.bJ)()}}},O=(0,g.jsxs)("div",{children:[U?(0,g.jsx)(r.A,{}):(0,g.jsx)(t.A,{}),(0,g.jsx)("div",{style:{marginTop:8},children:(0,g.jsxs)("div",{className:"my-auto text-center",children:[(0,g.jsx)("span",{className:"icon-camera"}),(0,g.jsx)("div",{className:"font-sm txt",children:"+ Upload Image"})]})})]});return a?(0,g.jsx)(o.A.Item,{label:s,className:"flex-col",name:x,help:E.error&&null!==E&&void 0!==E&&E.error&&null!==E&&void 0!==E&&E.touched?E.error:"",validateStatus:R.error?"error":"success",children:(0,g.jsxs)(i.A,{name:"file",type:"file",listType:"picture-card",className:"avatar-uploader",showUploadList:!1,action:f,beforeUpload:k,onChange:z,disabled:U,...y,headers:{"Access-Control-Allow-Origin":"*",Authorization:"Bearer ".concat(S)},children:[I?U?(N.userRole,(0,g.jsx)(r.A,{})):(0,g.jsx)("img",{src:I,alt:"avatar",style:{height:"100%"}}):O,j]})}):(0,g.jsx)(o.A.Item,{label:s,className:"flex-col",name:x,help:E.error&&null!==E&&void 0!==E&&E.error&&null!==E&&void 0!==E&&E.touched?E.error:"",validateStatus:R.error?"error":"success",children:(0,g.jsxs)(i.A,{name:"file",type:"file",listType:"picture-card",className:"avatar-uploader",showUploadList:!1,action:f,beforeUpload:k,onChange:z,...y,headers:{"Access-Control-Allow-Origin":"*",Authorization:"Bearer ".concat(S)},children:[I?U?"admin"===N.userRole?(0,g.jsx)(r.A,{}):(0,g.jsx)(r.A,{className:"text-white"}):(0,g.jsx)("img",{src:I,alt:"avatar",style:{height:"100%"}}):O,j]})})}}}]);