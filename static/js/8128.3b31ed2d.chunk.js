"use strict";(self.webpackChunkdellace=self.webpackChunkdellace||[]).push([[8128],{98128:(e,a,r)=>{r.r(a),r.d(a,{default:()=>h});var t=r(9950),d=r(5216),s=r(28429),l=r(92229),o=r(52278),i=r(21130),n=r(57266),c=r(31984),m=r(29714);var u=r(44414);const v=function(e){const{onSubmit:a,loading:r,formData:t,produtCategoryData:d,brandData:s}=e,i={image:(null===t||void 0===t?void 0:t.image)||"",name:(null===t||void 0===t?void 0:t.name)||"",brandId:(null===t||void 0===t?void 0:t.brandId)||void 0,price:(null===t||void 0===t?void 0:t.price)||"",categoryId:(null===t||void 0===t?void 0:t.categoryId)||void 0,description:(null===t||void 0===t?void 0:t.description)||"",packageName:(null===t||void 0===t?void 0:t.packageName)||""};return(0,u.jsx)(n.l1,{initialValues:{...i},validationSchema:m.Ik().shape({name:m.Yj().required("Product name is required"),image:m.Yj().required("Product image is required"),brandId:m.Yj().required("Brand is required"),price:m.Yj().required("Price is required"),categoryId:m.Yj().required("Category is required"),description:m.Yj().required("Description is required"),packageName:m.Yj().required("Package name is required")}),onSubmit:a,enableReinitialize:!0,children:e=>(0,u.jsxs)(n.lV,{children:[(0,u.jsxs)("div",{className:"form-group",children:[(0,u.jsx)("label",{className:"form-label",children:"Product Image"}),(0,u.jsx)("div",{className:"form-group",children:(0,u.jsx)("div",{className:"upload_photo mb-2 mb-md-3 mx-auto text-center",children:(0,u.jsx)("div",{className:"img-box",children:(0,u.jsx)(l.c9,{name:"image",apiEndPoints:c.$U.productImage,type:"file",defaultImageUrl:"",setFieldValue:e.handleChange})})})})]}),(0,u.jsxs)("div",{className:"form-group",children:[(0,u.jsx)("label",{className:"form-label",children:"Product Name"}),(0,u.jsx)("div",{className:"form-control-wrap",children:(0,u.jsx)(l.pd,{id:"name",className:"form-control",name:"name",disabled:!1,variant:"standard",type:"text",placeholder:"Enter product name",setFieldValue:e.handleChange})})]}),(0,u.jsxs)("div",{className:"form-group",children:[(0,u.jsx)("label",{className:"form-label",children:"Price"}),(0,u.jsx)("div",{className:"form-control-wrap",children:(0,u.jsx)(l.pd,{id:"price",className:"form-control",name:"price",disabled:!1,variant:"standard",type:"text",placeholder:"Enter price",setFieldValue:e.handleChange,min:"0",inputmode:"numeric",onKeyPress:e=>{(0,o.Jf)(e)}})})]}),(0,u.jsxs)("div",{className:"form-group",children:[(0,u.jsx)("label",{className:"form-label",children:"Package Name"}),(0,u.jsx)("div",{className:"form-control-wrap",children:(0,u.jsx)(l.pd,{id:"packageName",className:"form-control",name:"packageName",disabled:!1,variant:"standard",type:"text",placeholder:"Enter package name<",setFieldValue:e.handleChange})})]}),(0,u.jsxs)("div",{className:"form-group",children:[(0,u.jsx)("div",{className:"form-label-group",children:(0,u.jsx)("label",{className:"form-label",htmlFor:"email",children:"Brand"})}),(0,u.jsx)("div",{className:"form-control-wrap",children:(0,u.jsx)(l.l6,{id:"brandId",name:"brandId",variant:"standard",arrayOfData:s,placeholder:"Select Brand",setFieldValue:e.handleChange})})]}),(0,u.jsxs)("div",{className:"form-group",children:[(0,u.jsx)("div",{className:"form-label-group",children:(0,u.jsx)("label",{className:"form-label",htmlFor:"email",children:"Category"})}),(0,u.jsx)("div",{className:"form-control-wrap",children:(0,u.jsx)(l.l6,{id:"categoryId",name:"categoryId",variant:"standard",arrayOfData:d,placeholder:"Select Category",setFieldValue:e.handleChange})})]}),(0,u.jsxs)("div",{className:"form-group",children:[(0,u.jsx)("div",{className:"form-label-group",children:(0,u.jsx)("label",{className:"form-label",htmlFor:"email",children:"Description"})}),(0,u.jsx)("div",{className:"form-control-wrap",children:(0,u.jsx)(l.OE,{id:"description",name:"description",variant:"standard",className:"form-control",placeholder:"Enter description",setFieldValue:e.handleChange})})]}),(0,u.jsx)("div",{className:"form-group text-center",children:(0,u.jsx)(l.mU,{htmlType:"submit",type:"submit",loading:r,extraClassName:"btn btn-primary ripple-effect",children:null!==t&&void 0!==t&&t.id?"Update Product":"Add Product"})})]})})};var f=r(48093);const p={getProductList:async e=>{try{const a={...c.Yt.allProduct,queryParams:e};return await(0,f.A)(a)}catch(a){throw(0,o.vF)(a),a}},addProduct:async e=>{try{const a={...c.Yt.addProduct,bodyData:e};return await(0,f.A)(a)}catch(a){throw(0,o.vF)(a),a}},updateProduct:async(e,a)=>{try{const r={...c.Yt.updateProduct(e),bodyData:a};return await(0,f.A)(r)}catch(r){throw(0,o.vF)(r),r}},updateProductService:async(e,a)=>{try{const r={...c.Yt.deleteProduct(e),bodyData:a};return await(0,f.A)(r)}catch(r){throw(0,o.vF)(r),r}}};const h=function(){const e=(0,s.zy)(),{search:a}=e,[r,n]=(0,t.useState)([]),[c,m]=(0,t.useState)({}),[f,h]=(0,t.useState)(1),[x,g]=(0,t.useState)(10),[N,b]=(0,t.useState)(""),[y,j]=(0,t.useState)([{dataField:"",order:""}]),[P,w]=(0,t.useState)(!1),[C,F]=(0,t.useState)(),[S,k]=(0,t.useState)(0),[A,D]=(0,t.useState)(!1),[I,B]=(0,t.useState)(""),[U,q]=(0,t.useState)(!1),[Y,V]=(0,t.useState)([]),[R,T]=(0,t.useState)([]),[E,H]=(0,t.useState)(!1);(0,t.useEffect)((()=>{if(a){var e;const r=(0,o.Xf)(a);if(m(r),h(null!==(e=null===r||void 0===r?void 0:r.page)&&void 0!==e?e:1),null!==r&&void 0!==r&&r.sortType){const e=[{order:(0,o.BN)(null===r||void 0===r?void 0:r.sortType),dataField:null===r||void 0===r?void 0:r.sortBy}];j(e)}else j({dataField:"",order:""})}}),[e]);const L=e=>{D(!0),B(e)},z=async()=>{w(!0);try{let e={offset:(f-1)*x,limit:x,sortBy:null===c||void 0===c?void 0:c.sortBy,sortType:null===c||void 0===c?void 0:c.sortType,name:N};const a=await p.getProductList(e),{success:r,data:t}=a;r&&(n(t.rows),F(t.count>0?Math.ceil(t.count/x):1),k(t.count))}catch(e){(0,o.vF)(e)}w(!1)},O=[{dataField:"imageUrl",text:"Product Image",formatter:(e,a)=>null!==a&&void 0!==a&&a.imageUrl?(0,l.AN)(e):"-"},{dataField:"name",text:"Product Name",formatter:e=>(0,o.JD)(e)},{dataField:"packageName",text:"Package Name",formatter:e=>(0,o.JD)(e)},{dataField:"brand",text:"Brand",formatter:(e,a)=>{var r;return(0,o.JD)(null===a||void 0===a||null===(r=a.brand)||void 0===r?void 0:r.name)}},{dataField:"productCategory",text:"Product Category",formatter:(e,a)=>{var r;return(0,o.JD)(null===a||void 0===a||null===(r=a.brand)||void 0===r?void 0:r.name)}},{dataField:"price",text:"Price",formatter:e=>(0,o.JD)(e)},{dataField:"action",text:"Action",headerClasses:"d-flex justify-content-end",formatter:(e,a)=>(0,l.PW)((e=>[{name:"Edit",icon:"icon ni ni-pen",path:"#addForm",action:"confirm",onClickHandle:()=>{L(e)}},{name:"Delete",icon:"icon ni ni-trash",action:"confirm",onClickHandle:()=>{B(e),H(!0),document.body.click()}}])(a))}],J=()=>{w(!0),n([]),F(0),k(0)};return(0,t.useEffect)((()=>{(async()=>{w(!0);try{let t={type:"all"};const d=await i.YV.getProductCategoryList(t),s=await i.Yc.getBrandList(t),{success:l,data:o}=d;if(l){var e;let a=null===o||void 0===o||null===(e=o.rows)||void 0===e?void 0:e.map((e=>({name:null===e||void 0===e?void 0:e.name,id:null===e||void 0===e?void 0:e.id})));V(a)}if(null!==s&&void 0!==s&&s.success){var a,r;let e=null===s||void 0===s||null===(a=s.data)||void 0===a||null===(r=a.rows)||void 0===r?void 0:r.map((e=>({name:null===e||void 0===e?void 0:e.name,id:null===e||void 0===e?void 0:e.id})));T(e)}}catch(t){(0,o.vF)(t)}w(!1)})()}),[]),(0,t.useEffect)((()=>{z()}),[c]),(0,u.jsxs)("div",{className:"nk-block-head nk-block-head-sm",children:[(0,u.jsxs)("div",{className:"nk-block-between",children:[(0,u.jsx)(d.A,{className:"w-100 rounded-2 mb-4",children:(0,u.jsx)(d.A.Body,{children:(0,u.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,u.jsx)(l.zY,{heading:"Product"}),(0,u.jsx)(l.G7,{btnText:"Add Product",onHandleShow:e=>{e.preventDefault(),L()},btnArray:["create"]})]})})}),(0,u.jsx)(l.zf,{onHandleCancel:()=>{D(!1),B("")},show:A,title:null!==I&&void 0!==I&&I.id?"Edit Product":"Add Product",children:(0,u.jsx)(v,{formData:I,onSubmit:async e=>{q(!0);try{let a={...e};const r=I?await(null===p||void 0===p?void 0:p.updateProduct(null===I||void 0===I?void 0:I.id,a)):await(null===p||void 0===p?void 0:p.addProduct(a));null!==r&&void 0!==r&&r.success&&((0,o.Vy)({type:"success",message:null===r||void 0===r?void 0:r.message}),D(!1),B(""),J(),z())}catch(a){(0,o.vF)(a)}q(!1)},loading:U,produtCategoryData:Y,brandData:R})})]}),(0,u.jsx)(l.bQ,{sizePerPagination:!1,hasLimit:!0,noOfPage:C,sizePerPage:x,page:f,count:S,tableData:r,tableColumns:O,defaultSort:y,tableLoader:P,setSizePerPage:g,tableReset:J,getSearchValue:e=>{b(e),e&&J()},searchPlaceholder:"Product Name"}),(0,u.jsx)(l.r0,{title:"Are you sure",text:"you want to delete this product?",show:E,icon:"warning",showCancelButton:!0,confirmButtonText:"Yes",cancelButtonText:"No",setIsAlertVisible:H,onConfirmAlert:()=>(async function(){try{const e=await(null===p||void 0===p?void 0:p.updateProductService(null===I||void 0===I?void 0:I.id));null!==e&&void 0!==e&&e.success&&((0,o.Vy)({type:"success",message:null===e||void 0===e?void 0:e.message}),z())}catch(e){(0,o.vF)(e)}}(),w(!0),H(!1),!1)})]})}},5216:(e,a,r)=>{r.d(a,{A:()=>I});var t=r(48738),d=r.n(t),s=r(9950),l=r(44089),o=r(44414);const i=s.forwardRef(((e,a)=>{let{className:r,bsPrefix:t,as:s="div",...i}=e;return t=(0,l.oU)(t,"card-body"),(0,o.jsx)(s,{ref:a,className:d()(r,t),...i})}));i.displayName="CardBody";const n=i,c=s.forwardRef(((e,a)=>{let{className:r,bsPrefix:t,as:s="div",...i}=e;return t=(0,l.oU)(t,"card-footer"),(0,o.jsx)(s,{ref:a,className:d()(r,t),...i})}));c.displayName="CardFooter";const m=c;var u=r(22063);const v=s.forwardRef(((e,a)=>{let{bsPrefix:r,className:t,as:i="div",...n}=e;const c=(0,l.oU)(r,"card-header"),m=(0,s.useMemo)((()=>({cardHeaderBsPrefix:c})),[c]);return(0,o.jsx)(u.A.Provider,{value:m,children:(0,o.jsx)(i,{ref:a,...n,className:d()(t,c)})})}));v.displayName="CardHeader";const f=v,p=s.forwardRef(((e,a)=>{let{bsPrefix:r,className:t,variant:s,as:i="img",...n}=e;const c=(0,l.oU)(r,"card-img");return(0,o.jsx)(i,{ref:a,className:d()(s?"".concat(c,"-").concat(s):c,t),...n})}));p.displayName="CardImg";const h=p,x=s.forwardRef(((e,a)=>{let{className:r,bsPrefix:t,as:s="div",...i}=e;return t=(0,l.oU)(t,"card-img-overlay"),(0,o.jsx)(s,{ref:a,className:d()(r,t),...i})}));x.displayName="CardImgOverlay";const g=x,N=s.forwardRef(((e,a)=>{let{className:r,bsPrefix:t,as:s="a",...i}=e;return t=(0,l.oU)(t,"card-link"),(0,o.jsx)(s,{ref:a,className:d()(r,t),...i})}));N.displayName="CardLink";const b=N;var y=r(27611);const j=(0,y.A)("h6"),P=s.forwardRef(((e,a)=>{let{className:r,bsPrefix:t,as:s=j,...i}=e;return t=(0,l.oU)(t,"card-subtitle"),(0,o.jsx)(s,{ref:a,className:d()(r,t),...i})}));P.displayName="CardSubtitle";const w=P,C=s.forwardRef(((e,a)=>{let{className:r,bsPrefix:t,as:s="p",...i}=e;return t=(0,l.oU)(t,"card-text"),(0,o.jsx)(s,{ref:a,className:d()(r,t),...i})}));C.displayName="CardText";const F=C,S=(0,y.A)("h5"),k=s.forwardRef(((e,a)=>{let{className:r,bsPrefix:t,as:s=S,...i}=e;return t=(0,l.oU)(t,"card-title"),(0,o.jsx)(s,{ref:a,className:d()(r,t),...i})}));k.displayName="CardTitle";const A=k,D=s.forwardRef(((e,a)=>{let{bsPrefix:r,className:t,bg:s,text:i,border:c,body:m=!1,children:u,as:v="div",...f}=e;const p=(0,l.oU)(r,"card");return(0,o.jsx)(v,{ref:a,...f,className:d()(t,p,s&&"bg-".concat(s),i&&"text-".concat(i),c&&"border-".concat(c)),children:m?(0,o.jsx)(n,{children:u}):u})}));D.displayName="Card";const I=Object.assign(D,{Img:h,Title:A,Subtitle:w,Body:n,Link:b,Text:F,Header:f,Footer:m,ImgOverlay:g})},22063:(e,a,r)=>{r.d(a,{A:()=>d});const t=r(9950).createContext(null);t.displayName="CardHeaderContext";const d=t},27611:(e,a,r)=>{r.d(a,{A:()=>o});var t=r(9950),d=r(48738),s=r.n(d),l=r(44414);const o=e=>t.forwardRef(((a,r)=>(0,l.jsx)("div",{...a,ref:r,className:s()(a.className,e)})))}}]);